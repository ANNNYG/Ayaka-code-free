# é¡¹ç›®è§„èŒƒé…ç½®

## é…ç½® stylelint

[å®˜ç½‘](https://stylelint.io/)

ä¿®æ”¹ package.json,é…ç½®æ£€æŸ¥å‘½ä»¤

```json
"script": {
    "lint:style": "stylelint **/*.{vue,css}",
},
```

åœ¨æ ¹ç›®å½•ä¸‹é…ç½®stylelinté…ç½®æ–‡ä»¶ `stylelint.config.js`ï¼Œè¿™é‡Œæ²¡æœ‰é…ç½®è¯¦ç»†è§„åˆ™ï¼Œç›´æ¥ç»§æ‰¿`stylelint-config-standard`ã€
`stylelint-config-prettier`ã€
`stylelint-config-html/vue`,è¿™ä¸‰ä¸ªè§„åˆ™

å®˜ç½‘ä¹Ÿæœ‰æä¾›å…¶ä»–çš„é…ç½®æ–¹æ³•ï¼Œé…ç½®è¯¦æƒ…å‚è€ƒ[è¿™é‡Œ](http://stylelint.docschina.org/user-guide/configuration/)

- åœ¨`package.json`é‡Œæ·»åŠ `stylelint`å­—æ®µçš„é…ç½®
- åœ¨`stylelintrc`é‡Œé…ç½®

```js
module.exports = {
  extends: ['stylelint-config-standard', 'stylelint-config-prettier', 'stylelint-config-html/vue']
}
```

ç„¶åæ‰§è¡Œæ£€æŸ¥å‘½ä»¤å¯ä»¥çœ‹åˆ°stylelintå·²ç»é…ç½®å¥½äº†

## æ‹¼å†™æ£€æŸ¥

è¿™é‡Œä½¿ç”¨çš„æ‹¼å†™æ£€æŸ¥åº“[cspell](https://cspell.org/)

é…ç½®`package.json`

```json
 "spellcheck": "cspell lint --dot --gitignore --color --cache --show-suggestions \"src/**/*.@(html|js|cjs|mjs|ts|tsx|css|scss|md|vue)\"",
```

é…ç½®cspelléœ€è¦åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º`cspell.json`ã€`cspell.config.yaml`æˆ–è€…`cspell.config.cjs`ï¼Œè¿™é‡Œä»¥`cspell.json`ä¸¾ä¾‹

```json
{
  "import": ["@cspell/dict-lorem-ipsum/cspell-ext.json"],
  "caseSensitive": false,
  "dictionaries": ["custom-words"],
  "dictionaryDefinitions": [
    {
      "name": "custom-words",
      "path": "./.cspell/custom-words.txt",
      "addWords": true
    }
  ],
  // å¿½ç•¥ç›®å½•
  "ignorePaths": ["**/node_modules/**", "**/dist/**", "**/lib/**", "**/docs/**", "**/stats.html"]
}
```

å¹¶åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.cspell/custom-words.txt`ï¼ŒæŠŠé‚£äº›è®¤ä¸ºæ˜¯å¯¹çš„çš„å•è¯æ”¾è¿›å»ï¼Œè¿™æ ·æ‹¼å†™æ£€æŸ¥å°±ä¸ä¼šæŠ¥é”™äº†

## é…ç½® husky

[husky](https://typicode.github.io/husky/#/)

æ‰§è¡Œå‘½ä»¤ï¼Œåˆå§‹åŒ– husky

```shell
npx husky init
```

## é…ç½®commitlint

[commitlint](https://commitlint.js.org/#/)

é…ç½®å¥½commitlintï¼Œæ‰§è¡Œå‘½ä»¤åœ¨`.husky`æ–‡ä»¶ä¸‹åˆ›å»ºå¯¹åº”é’©å­çš„æ‰§è¡Œè„šæœ¬

```shell
npx husky add .husky/commit-msg  'npx --no -- commitlint --edit ${1}'
```

åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º`commitlint.config.js`ï¼Œé…ç½®commitlintè§„åˆ™

```js
module.exports = {
  extends: ['@commitlint/config-conventional'], // extends can be nested
  rules: {
    'type-enum': [2, 'always', ['feat', 'fix', 'doc']]
  }
}
```

### è¸©å‘è®°å½•

ä¹‹å‰åœ¨é…ç½®commitlintçš„æ—¶å€™ï¼Œcommitå¤‡æ³¨ä¿¡æ¯ä¸€ç›´ä¸ç¬¦åˆcommitlintçš„è§„åˆ™ï¼Œä½†æ˜¯ä»£ç è¿˜æ˜¯æ­£å¸¸æäº¤ï¼Œç„¶åå‘ç°æ˜¯æœ‰è­¦å‘Šï¼Œæç¤ºcommit-msgæ²¡æœ‰æ‰§è¡Œï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼Œ[githubä¸Šè§£å†³æ–¹æ³•](https://github.com/typicode/husky/issues/1113)ï¼Œæ‰§è¡Œä¸€ä¸‹`chmod +x .husky/commit-msg`å°±å¯ä»¥äº†

æŠ¥é”™å¦‚ä¸‹

```shell
hint: The '.husky/commit-msg' hook was ignored because it's not set as executable.
hint: You can disable this warning with `git config advice.ignoredHook false`.
```

## é…ç½®eslint

è¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œç›´æ¥å®‰è£…eslintï¼Œç„¶åæŠŠè§„åˆ™æŒ‰éœ€é…ç½®åœ¨`.eslintrc.cjs`é‡Œå°±å¥½äº†

```shell
pnpm install eslint -D
```

[eslint](https://eslint.org/)

## é…ç½®prettier

[prettier](https://prettier.io/)ç”¨äºæ ¼å¼åŒ–ä»£ç ï¼Œåœ¨æ ¹ç›®å½•æ·»åŠ `.prettierrc.js`é…ç½®æ–‡ä»¶ï¼Œé…ç½®è§„åˆ™ï¼Œé…ç½®`.prettieigonre`å¿½ç•¥æ–‡ä»¶

## é…ç½®lint-staged

[lint-staged](https://github.com/okonet/lint-staged)å¯ä»¥åœ¨æäº¤ä»£ç çš„æ—¶å€™ï¼Œæ£€æŸ¥æš‚å­˜åŒºçš„ä»£ç ï¼Œå¯¹ä»£ç æ‰§è¡Œä¸€äº›æ£€æŸ¥æˆ–è€…é’©å­æ“ä½œï¼Œæ¯”å¦‚æ‰§è¡Œeslintã€stylelintã€prettierç­‰ï¼Œåœ¨`package.json`é‡Œæ·»åŠ é…ç½®ï¼Œåœ¨`husky`é‡Œæ·»åŠ é’©å­`pre-commit`ï¼Œè¿™è¾¹æ·»åŠ äº†`eslint`ã€`prettier`ã€`stylelint`çš„æ£€æŸ¥ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ·»åŠ ï¼Œä½†è®°å¾—ä¸€å®šè¦æ·»åŠ ç›¸å…³çš„é…ç½®æ–‡ä»¶

```json
  "lint-staged": {
    "*": "prettier --write",
    "*.{vue,ts}": "eslint --fix",
    "*.{html,vue,css,sass,scss}": "stylelint --fix"
  },
```

## é…ç½®cz-git

[cz-git](https://cz-git.qbb.sh/zh/)ï¼Œgitå‘½ä»¤å¼äº¤äº’å·¥å…·ï¼Œéœ€è¦å®‰è£…`commitizen`å’Œ`cz-git`

```shell
npm install -D cz-git commitizen
```

åœ¨`package.json`é‡Œæ·»åŠ é…ç½®ï¼Œä¹‹åæäº¤ä»£ç ä½¿ç”¨`pnpm commit`æäº¤å°±å¯ä»¥äº†

```json
"scripts": {
    "commit": "git-cz"
  },
"config": {
    "commitizen": {
      "path": "node_modules/cz-git"
    }
  },
```

é›†æˆåˆ°`commitlint.config.js`

```js
module.exports = {
  extends: ['@commitlint/config-conventional'], // extends can be nested
  rules: {
    'type-enum': [2, 'always', ['feat', 'fix', 'doc']]
  },
  prompt: {
    settings: {},
    messages: {
      skip: ':skip',
      max: 'upper %d chars',
      min: '%d chars at least',
      emptyWarning: 'can not be empty',
      upperLimitWarning: 'over limit',
      lowerLimitWarning: 'below limit'
    },
    types: [
      { value: 'feat', name: 'feat:     âœ¨  A new feature', emoji: 'âœ¨ ' },
      { value: 'fix', name: 'fix:      ğŸ›  A bug fix', emoji: 'ğŸ› ' },
      { value: 'docs', name: 'docs:     ğŸ“  Documentation only changes', emoji: 'ğŸ“ ' },
      {
        value: 'style',
        name: 'style:    ğŸ’„  Changes that do not affect the meaning of the code',
        emoji: 'ğŸ’„ '
      },
      {
        value: 'refactor',
        name: 'refactor: ğŸ“¦ï¸   A code change that neither fixes a bug nor adds a feature',
        emoji: 'ğŸ“¦ï¸ '
      },
      {
        value: 'perf',
        name: 'perf:     ğŸš€  A code change that improves performance',
        emoji: 'ğŸš€ '
      },
      {
        value: 'test',
        name: 'test:     ğŸš¨  Adding missing tests or correcting existing tests',
        emoji: 'ğŸš¨ '
      },
      {
        value: 'build',
        name: 'build:    ğŸ›    Changes that affect the build system or external dependencies',
        emoji: 'ğŸ›  '
      },
      {
        value: 'ci',
        name: 'ci:       ğŸ¡  Changes to our CI configuration files and scripts',
        emoji: 'ğŸ¡ '
      },
      {
        value: 'chore',
        name: "chore:    ğŸ”¨  Other changes that don't modify src or test files",
        emoji: 'ğŸ”¨ '
      },
      { value: 'revert', name: 'revert:   âªï¸  Reverts a previous commit', emoji: ':rewind:' }
    ],
    useEmoji: true,
    confirmColorize: true,
    emojiAlign: 'center',
    questions: {
      scope: {
        description: 'What is the scope of this change (e.g. component or file name)'
      },
      subject: {
        description: 'Write a short, imperative tense description of the change'
      },
      body: {
        description: 'Provide a longer description of the change'
      },
      isBreaking: {
        description: 'Are there any breaking changes?'
      },
      breakingBody: {
        description:
          'A BREAKING CHANGE commit requires a body. Please enter a longer description of the commit itself'
      },
      breaking: {
        description: 'Describe the breaking changes'
      },
      isIssueAffected: {
        description: 'Does this change affect any open issues?'
      },
      issuesBody: {
        description:
          'If issues are closed, the commit requires a body. Please enter a longer description of the commit itself'
      },
      issues: {
        description: 'Add issue references (e.g. "fix #123", "re #123".)'
      }
    }
  }
}
```
